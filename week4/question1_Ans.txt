-- Question : Write a procedure to print all products for a given product line. The procedure will receive productLine as input. You should print useful relevant information.

-- Solution : 
-- DROP if exists
DROP PROCEDURE IF EXISTS prc_list_products_by_line;

DELIMITER //

CREATE PROCEDURE prc_list_products_by_line(IN p_productLine VARCHAR(50))
BEGIN
    -- 顯示主要表格
    SELECT
        productCode AS Code,
        productName AS Name,
        quantityInStock AS Quantity,
        CONCAT('$', FORMAT(buyPrice, 2)) AS Price
    FROM products
    WHERE productLine = p_productLine;

    -- 顯示總數
    SELECT
        COUNT(*) AS total_products
    FROM products
    WHERE productLine = p_productLine;
END;
//

DELIMITER ;
